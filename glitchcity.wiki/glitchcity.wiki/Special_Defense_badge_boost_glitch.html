
<!DOCTYPE html>
<html class="client-nojs" lang="en" dir="ltr">

<!-- Mirrored from glitchcity.wiki/Special_Defense_badge_boost_glitch by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 16 Oct 2020 21:21:03 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /Added by HTTrack -->
<head>
<meta charset="UTF-8" />
<title>Special Defense badge boost glitch - Glitch City Wiki</title>
<script src="cdn-cgi/apps/head/TVJhTom-oMvagx6X31REykU34Zo.js"></script><script>document.documentElement.className="client-js";RLCONF={"wgCanonicalNamespace":"","wgCanonicalSpecialPageName":!1,"wgNamespaceNumber":0,"wgPageName":"Special_Defense_badge_boost_glitch","wgTitle":"Special Defense badge boost glitch","wgCurRevisionId":9915,"wgRevisionId":9915,"wgArticleId":9914,"wgIsArticle":!0,"wgIsRedirect":!1,"wgAction":"view","wgUserName":null,"wgUserGroups":["*"],"wgCategories":["Generation II glitches"],"wgBreakFrames":!1,"wgPageContentLanguage":"en","wgPageContentModel":"wikitext","wgSeparatorTransformTable":["",""],"wgDigitTransformTable":["",""],"wgDefaultDateFormat":"dmy","wgMonthNames":["","January","February","March","April","May","June","July","August","September","October","November","December"],"wgMonthNamesShort":["","Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],"wgRelevantPageName":"Special_Defense_badge_boost_glitch","wgRelevantArticleId":9914,"wgRequestId":"eb11df4dbebfc338e96cc7a1","wgCSPNonce":!1,
"wgIsProbablyEditable":!1,"wgRelevantPageIsProbablyEditable":!1,"wgRestrictionEdit":[],"wgRestrictionMove":[]};RLSTATE={"site.styles":"ready","noscript":"ready","user.styles":"ready","user":"ready","user.options":"ready","user.tokens":"loading","mediawiki.legacy.shared":"ready","mediawiki.legacy.commonPrint":"ready","mediawiki.skinning.interface":"ready","mediawiki.skinning.content.externallinks":"ready","skins.monobook.responsive":"ready"};RLPAGEMODULES=["site","mediawiki.page.startup","mediawiki.page.ready","mediawiki.searchSuggest","skins.monobook.mobile"];</script>
<script>(RLQ=window.RLQ||[]).push(function(){mw.loader.implement("user.tokens@tffin",function($,jQuery,require,module){/*@nomin*/mw.user.tokens.set({"editToken":"+\\","patrolToken":"+\\","watchToken":"+\\","csrfToken":"+\\"});
});});</script>
<link rel="stylesheet" href="load555a.css?lang=en&amp;modules=mediawiki.legacy.commonPrint%2Cshared%7Cmediawiki.skinning.content.externallinks%7Cmediawiki.skinning.interface%7Cskins.monobook.responsive&amp;only=styles&amp;skin=monobook" />
<script async="" src="load2418.php?lang=en&amp;modules=startup&amp;only=scripts&amp;raw=1&amp;skin=monobook"></script>
<!--[if lt IE 9]><link rel="stylesheet" href="/skins/MonoBook/resources/screen-desktop.css?74a6a" media="screen"/><![endif]--><!--[if IE 6]><link rel="stylesheet" href="/skins/MonoBook/resources/IE60Fixes.css?1208f" media="screen"/><![endif]--><!--[if IE 7]><link rel="stylesheet" href="/skins/MonoBook/resources/IE70Fixes.css?4e4d4" media="screen"/><![endif]-->
<meta name="ResourceLoaderDynamicStyles" content="" />
<link rel="stylesheet" href="loaddca0.css?lang=en&amp;modules=site.styles&amp;only=styles&amp;skin=monobook" />
<meta name="generator" content="MediaWiki 1.34.2" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes, minimum-scale=0.25, maximum-scale=5.0" />
<link rel="shortcut icon" href="Favicon.html" />
<link rel="search" type="application/opensearchdescription+xml" href="opensearch_desc.php" title="Glitch City Wiki (en)" />
<link rel="EditURI" type="application/rsd+xml" href="api-result251f.xml?action=rsd" />
<link rel="alternate" type="application/atom+xml" title="Glitch City Wiki Atom feed" href="feeda295.xml?title=Special:RecentChanges&amp;feed=atom" />
<!--[if lt IE 9]><script src="/resources/lib/html5shiv/html5shiv.js"></script><![endif]-->
</head>
<body class="mediawiki ltr sitedir-ltr mw-hide-empty-elt ns-0 ns-subject page-Special_Defense_badge_boost_glitch rootpage-Special_Defense_badge_boost_glitch skin-monobook action-view"><div id="globalWrapper"><div id="column-content"><div id="content" class="mw-body" role="main"><a id="top"></a><div class="mw-indicators mw-body-content">
</div>
<h1 id="firstHeading" class="firstHeading" lang="en">Special Defense badge boost glitch</h1><div id="bodyContent" class="mw-body-content"><div id="siteSub">From Glitch City Wiki</div><div id="contentSub" lang="en" dir="ltr"></div><div id="jump-to-nav"></div><a href="#column-one" class="mw-jump-link">Jump to navigation</a><a href="#searchInput" class="mw-jump-link">Jump to search</a><div id="mw-content-text" lang="en" dir="ltr" class="mw-content-ltr"><div class="mw-parser-output"><p>The <b>Special Defense badge boost glitch</b> is a <a href="Glitch.html" title="Glitch">glitch</a> in <a href="https://bulbapedia.bulbagarden.net/wiki/Pokémon_Gold_and_Silver_Versions" class="extiw" title="bp:Pokémon Gold and Silver Versions">Pokémon Gold, Silver</a> and <a href="https://bulbapedia.bulbagarden.net/wiki/Pokémon_Crystal_Version" class="extiw" title="bp:Pokémon Crystal Version">Crystal</a> that causes the Glacier Badge's <a href="https://bulbapedia.bulbagarden.net/wiki/Badge#Stat_boost" class="extiw" title="bp:Badge">boost</a> to the Special Defense stat of a Pokémon to not apply if the Special Attack stat of that Pokémon is in certain ranges.
</p><p>Specifically, if the unboosted Special Attack stat (which may include the Special Attack stage modifier) is either 0 ~ 205, or 433 ~ 660, then the glitch will cause the player to lose the Special Defense boost.
</p><p>After giving the player the Glacier Badge, Pryce mentions that "That BADGE will raise the SPECIAL stats of POKéMON." Presumably, the developer's intention is for the Glacier Badge to boost both the Special Attack and the Special Defence unconditionally. However, the code to apply the Special Defense boost uses register <code>a</code> to determine whether the boost should be applied, but the value in register <code>a</code> is overwritten while applying the Special Attack boost. This results in an unintended extra condition for the boost to apply.
</p>
<h2><span class="mw-headline" id="Analysis">Analysis</span></h2>
<p>The piece of code to apply the badge stat boosts is as follows: (<a rel="nofollow" class="external text" href="https://github.com/pret/pokecrystal/blob/5cdf4f9ae0cb6884472d9f7ca3926e610345c3ba/engine/battle/core.asm#L6797">external link</a>)
</p>
<pre>; The value in register b has been initialized to a bitmask for Johto badges,
; in the following order, starting from the least significant bit:
;   ZEPHYR, HIVE, MINERAL, FOG, PLAIN, STORM, GLACIER, RISING.

; The order of the stats are:
;   Attack, Defense, Speed, SpAtk, SpDef.

	ld hl, wBattleMonAttack
	ld c, 4                 ; The number of times the below loop should execute
.CheckBadge:
	ld a, b                 ; Save the value of b, specifically for use after the loop
	srl b                   ; Shift b to the right, removing the least significant bit
	call c, BoostStat       ; Apply the boost if the bit just removed is 1
	inc hl
	inc hl                  ; Move to the next stat (stats are 2-byte integers)
</pre>
<pre>	srl b                   ; Throw away a bit from b (only check every other badge)
	dec c
	jr nz, .CheckBadge
</pre>
<pre>	srl a                   ; Check Glacier Badge again for Special Defense
	call c, BoostStat
	ret
</pre>
<p>The last check assumes that the value in register <code>a</code> comes from the <code>ld a, b</code> instruction from the last iteration of the loop. Since the <code>srl b</code> immediately after is a check for the Glacier Badge, the final <code>srl a</code> should be a check for the Glacier Badge, too.
</p><p>However, this does not take into account that the function BoostStat actually overwrites register <code>a</code>. The code for that function is as follows: (<a rel="nofollow" class="external text" href="https://github.com/pret/pokecrystal/blob/5cdf4f9ae0cb6884472d9f7ca3926e610345c3ba/engine/battle/core.asm#L6814">external link</a>)
</p>
<pre>BoostStat:
; Raise stat at hl by 1/8.

	ld a, [hli]
	ld d, a     ; High byte of the stat
	ld e, [hl]  ; Low byte of the stat
	srl d
	rr e        ; Shift the 16-bit integer de to the right...
	srl d
	rr e        ; ...
	srl d
	rr e        ; ... three times (i.e. divide by 8)
	ld a, [hl]
	add e
	ld [hld], a
	ld a, [hl]
	adc d
	ld [hli], a&#160;; Add de back into the stat at hl

; Cap at 999.
	ld a, [hld]                ; Low byte of boosted stat
	sub LOW(MAX_STAT_VALUE)
	ld a, [hl]                 ; High byte of boosted stat
	sbc HIGH(MAX_STAT_VALUE)
	ret c                      ; If boosted stat is less than 999, return
	ld a, HIGH(MAX_STAT_VALUE)
	ld [hli], a
	ld a, LOW(MAX_STAT_VALUE)
	ld [hld], a                ; Otherwise, set boosted stat to 999
	ret
</pre>
<p>Here, the value of MAX_STAT_VALUE is 999 = 0x03E7.
</p><p>There are therefore three cases for the <code>srl a</code> check:
</p>
<ul><li><b>If the player does not have the Glacier Badge</b>, then the function BoostStat is not called, and the check works as intended. <b>The Special Defense boost will not be applied.</b></li>
<li><b>If the player has the Glacier Badge, and the unboosted Special Attack is at least 888</b>, then the boosted Special Attack would be at least 999, and the last few instructions in BoostStat will cap it at 999, setting register <code>a</code> to LOW(MAX_STAT_VALUE) = 0xE7 in the process. The <code>srl a</code> check will see that the least significant bit of 0xE7 is 1, so <b>the Special Defense boost will be applied.</b></li>
<li><b>If the player has the Glacier Badge, and the unboosted Special Attack is less than 888</b>, then the value left in register <code>a</code> will be the result of <code>sbc HIGH(MAX_STAT_VALUE)</code>, i.e. the high byte of (boosted Special Attack - 999). The table below shows the possible values for that high byte:</li></ul>
<table>
<tbody><tr>
<td>
<table border="1" width="100%" align="left" style="background:#f0f0f0; border:1px solid #000000; border-collapse:collapse;">
<tbody><tr style="background: silver;">
<th>Unboosted SpAtk</th>
<th>Boosted SpAtk</th>
<th>Boosted SpAtk - 999</th>
<th>Value left in <code>a</code></th>
<th>SpDef boost?
</th></tr>
<tr>
<td>0 ~ 205</td>
<td>0 ~ 230</td>
<td>-999 ~ -769 (0xFC19 ~ 0xFCFF)</td>
<td>0xFC</td>
<td>No
</td></tr>
<tr>
<td>206 ~ 432</td>
<td>231 ~ 486</td>
<td>-768 ~ -513 (0xFD00 ~ 0xFDFF)</td>
<td>0xFD</td>
<td>Yes
</td></tr>
<tr>
<td>433 ~ 660</td>
<td>487 ~ 742</td>
<td>-512 ~ -257 (0xFE00 ~ 0xFEFF)</td>
<td>0xFE</td>
<td>No
</td></tr>
<tr>
<td>661 ~ 887</td>
<td>743 ~ 997</td>
<td>-256 ~ -2 (0xFF00 ~ 0xFFFE)</td>
<td>0xFF</td>
<td>Yes
</td></tr></tbody></table>
</td></tr></tbody></table>
<p>In conclusion, this glitch causes an unintended behavior only when the player has the Glacier Badge, and the unboosted Special Attack of the Pokémon in question is either 0 ~ 205, or 433 ~ 660. In those cases, the glitch causes the Special Defense boost to not apply.
</p>



</div></div><div class="printfooter">
Retrieved from "<a dir="ltr" href="index6949.html?title=Special_Defense_badge_boost_glitch&amp;oldid=9915">https://glitchcity.wiki/index.php?title=Special_Defense_badge_boost_glitch&amp;oldid=9915</a>"</div>
<div id="catlinks" class="catlinks" data-mw="interface"><div id="mw-normal-catlinks" class="mw-normal-catlinks"><a href="Special_Categories.html" title="Special:Categories">Category</a>: <ul><li><a href="Category_Generation_II_glitches.html" title="Category:Generation II glitches">Generation II glitches</a></li></ul></div></div><div class="visualClear"></div></div></div><div class="visualClear"></div></div><div id="column-one" lang="en" dir="ltr"><h2>Navigation menu</h2><div role="navigation" class="portlet" id="p-cactions" aria-labelledby="p-cactions-label"><h3 id="p-cactions-label" lang="en" dir="ltr">Page actions</h3><div class="pBody"><ul lang="en" dir="ltr"><li id="ca-nstab-main" class="selected"><a href="Special_Defense_badge_boost_glitch.html" title="View the content page [c]" accesskey="c">Page</a></li><li id="ca-talk" class="new"><a href="Talk_Special_Defense_badge_boost_glitch.html?title=Talk:Special_Defense_badge_boost_glitch&amp;action=edit&amp;redlink=1" rel="discussion" title="Discussion about the content page (page does not exist) [t]" accesskey="t">Discussion</a></li><li id="ca-viewsource"><a href="index363e-2.html?title=Special_Defense_badge_boost_glitch&amp;action=edit" title="This page is protected.&#10;You can view its source [e]" accesskey="e">View source</a></li><li id="ca-history"><a href="indexef7d.html?title=Special_Defense_badge_boost_glitch&amp;action=history" title="Past revisions of this page [h]" accesskey="h">History</a></li></ul></div></div><div role="navigation" class="portlet" id="p-cactions-mobile" aria-labelledby="p-cactions-mobile-label"><h3 id="p-cactions-mobile-label" lang="en" dir="ltr">Page actions</h3><div class="pBody"><ul lang="en" dir="ltr"><li id="ca-nstab-main-mobile" class="selected"><a href="Special_Defense_badge_boost_glitch.html" title="Page">Page</a></li><li id="ca-talk-mobile" class="new"><a href="Talk_Special_Defense_badge_boost_glitch.html?title=Talk:Special_Defense_badge_boost_glitch&amp;action=edit&amp;redlink=1" rel="discussion" title=" (page does not exist)">Discussion</a></li><li id="ca-more"><a href="#p-cactions">More</a></li><li id="ca-tools"><a href="#p-tb" title="Tools">Tools</a></li></ul></div></div><div role="navigation" class="portlet" id="p-personal" aria-labelledby="p-personal-label"><h3 id="p-personal-label" lang="en" dir="ltr">Personal tools</h3><div class="pBody"><ul lang="en" dir="ltr"><li id="pt-createaccount"><a href="indexe45d.html?title=Special:CreateAccount&amp;returnto=Special+Defense+badge+boost+glitch" title="You are encouraged to create an account and log in; however, it is not mandatory">Create account</a></li><li id="pt-login"><a href="index3022.html?title=Special:UserLogin&amp;returnto=Special+Defense+badge+boost+glitch" title="You are encouraged to log in; however, it is not mandatory [o]" accesskey="o">Log in</a></li></ul></div></div><div class="portlet" id="p-logo" role="banner"><a href="Main_Page.html" class="mw-wiki-logo" title="Visit the main page"></a></div><div id="sidebar"><div role="navigation" class="portlet generated-sidebar" id="p-Main_Menu" aria-labelledby="p-Main_Menu-label"><h3 id="p-Main_Menu-label" lang="en" dir="ltr">Main Menu</h3><div class="pBody"><ul lang="en" dir="ltr"><li id="n-Main-page"><a href="Main_Page.html">Main page</a></li><li id="n-New-pages"><a href="Special_NewPages.html">New pages</a></li><li id="n-Recent-changes"><a href="Special_RecentChanges.html">Recent changes</a></li><li id="n-Random-page"><a href="Sky_Drop_glitch_(disambiguation).html">Random page</a></li><li id="n-Help"><a href="https://www.mediawiki.org/wiki/Special:MyLanguage/Help:Contents">Help</a></li></ul></div></div><div role="navigation" class="portlet generated-sidebar" id="p-Glitches" aria-labelledby="p-Glitches-label"><h3 id="p-Glitches-label" lang="en" dir="ltr">Glitches</h3><div class="pBody"><ul lang="en" dir="ltr"><li id="n-Arbitrary-code-execution"><a href="Arbitrary_code_execution.html">Arbitrary code execution</a></li><li id="n-Pok.C3.A9mon-cloning"><a href="Pok%c3%a9mon_cloning.html">Pokémon cloning</a></li><li id="n-Pomeg-glitch-and-Glitzer-Popping"><a href="Pomeg_data_corruption_glitch.html">Pomeg glitch and Glitzer Popping</a></li><li id="n-Tweaking-and-voiding"><a href="Tweaking.html">Tweaking and voiding</a></li><li id="n-Glitches-by-generation"><a href="Category_Generational_Glitches.html">Glitches by generation</a></li><li id="n-Other-glitch-categories"><a href="Category_Glitches_by_category.html">Other glitch categories</a></li></ul></div></div><div role="navigation" class="portlet generated-sidebar" id="p-References.2FResources" aria-labelledby="p-References.2FResources-label"><h3 id="p-References.2FResources-label" lang="en" dir="ltr">References/Resources</h3><div class="pBody"><ul lang="en" dir="ltr"><li id="n-Databases"><a href="Glitch_City_Laboratories_Databases.html">Databases</a></li><li id="n-Disassembly-projects"><a href="List_of_Pok%c3%a9mon_disassembly_projects.html">Disassembly projects</a></li><li id="n-The-Big-HEX-List"><a href="The_Big_HEX_List.html">The Big HEX List</a></li><li id="n-Interactive-tools"><a href="Category_Interactive_tools.html">Interactive tools</a></li><li id="n-Reference-documents"><a href="Category_Reference_documents.html">Reference documents</a></li><li id="n-Terminology"><a href="Category_Terminology.html">Terminology</a></li></ul></div></div><div role="navigation" class="portlet generated-sidebar" id="p-Speedrun_Routes_any.25" aria-labelledby="p-Speedrun_Routes_any.25-label"><h3 id="p-Speedrun_Routes_any.25-label" lang="en" dir="ltr">Speedrun Routes any%</h3><div class="pBody"><ul lang="en" dir="ltr"><li id="n-Pok.C3.A9mon-Crystal"><a href="Pok%c3%a9mon_Crystal_any%25_speedrun_route.html">Pokémon Crystal</a></li><li id="n-Pok.C3.A9mon-Blue"><a href="Pok%c3%a9mon_Blue_any%25_No_Save_Corruption_speedrun_route.html">Pokémon Blue</a></li></ul></div></div><div role="navigation" class="portlet generated-sidebar" id="p-External_Links" aria-labelledby="p-External_Links-label"><h3 id="p-External_Links-label" lang="en" dir="ltr">External Links</h3><div class="pBody"><ul lang="en" dir="ltr"><li id="n-GCRI-Discord"><a href="https://discord.gg/EA7jxJ6" rel="nofollow">GCRI Discord</a></li></ul></div></div><div role="navigation" class="portlet" id="p-tb" aria-labelledby="p-tb-label"><h3 id="p-tb-label" lang="en" dir="ltr">Tools</h3><div class="pBody"><ul lang="en" dir="ltr"><li id="t-whatlinkshere"><a href="Special_WhatLinksHere/Special_Defense_badge_boost_glitch.html" title="A list of all wiki pages that link here [j]" accesskey="j">What links here</a></li><li id="t-recentchangeslinked"><a href="Special_RecentChangesLinked/Special_Defense_badge_boost_glitch.html" rel="nofollow" title="Recent changes in pages linked from this page [k]" accesskey="k">Related changes</a></li><li id="t-specialpages"><a href="Special_SpecialPages.html" title="A list of all special pages [q]" accesskey="q">Special pages</a></li><li id="t-print"><a href="indexe297.html?title=Special_Defense_badge_boost_glitch&amp;printable=yes" rel="alternate" title="Printable version of this page [p]" accesskey="p">Printable version</a></li><li id="t-permalink"><a href="index6949.html?title=Special_Defense_badge_boost_glitch&amp;oldid=9915" title="Permanent link to this revision of the page">Permanent link</a></li><li id="t-info"><a href="index9060.html?title=Special_Defense_badge_boost_glitch&amp;action=info" title="More information about this page">Page information</a></li></ul></div></div><div role="search" class="portlet" id="p-search"><h3 id="p-search-label" lang="en" dir="ltr"><label for="searchInput">Search</label></h3><div class="pBody" id="searchBody"><form action="https://glitchcity.wiki/index.php" id="searchform"><input type="hidden" value="Special:Search" name="title" /><input type="search" name="search" placeholder="Search Glitch City Wiki" title="Search Glitch City Wiki [f]" accesskey="f" id="searchInput" /><input type="submit" name="go" value="Go" title="Go to a page with this exact name if it exists" id="searchGoButton" class="searchButton" />  <input type="submit" name="fulltext" value="Search" title="Search the pages for this text" id="mw-searchButton" class="searchButton" /></form></div></div></div><a href="#sidebar" title="navigation" class="menu-toggle" id="sidebar-toggle"></a><a href="#p-personal" title="user tools" class="menu-toggle" id="p-personal-toggle"></a><a href="#globalWrapper" title="back to top" class="menu-toggle" id="globalWrapper-toggle"></a></div><div class="visualClear"></div><div id="footer" role="contentinfo" lang="en" dir="ltr"><div id="f-poweredbyico" class="footer-icons"><a href="https://www.mediawiki.org/"><img src="resources/assets/poweredby_mediawiki_88x31.png" alt="Powered by MediaWiki" srcset="/resources/assets/poweredby_mediawiki_132x47.png 1.5x, /resources/assets/poweredby_mediawiki_176x62.png 2x" width="88" height="31" /></a></div><ul id="f-list"><li id="lastmod"> This page was last edited on 10 September 2019, at 02:20.</li><li id="privacy"><a href="Glitch_City_Wiki_Privacy_policy.html" title="Glitch City Wiki:Privacy policy">Privacy policy</a></li><li id="about"><a href="Glitch_City_Wiki_About.html" class="mw-redirect" title="Glitch City Wiki:About">About Glitch City Wiki</a></li><li id="disclaimer"><a href="Glitch_City_Wiki_General_disclaimer.html" title="Glitch City Wiki:General disclaimer">Disclaimers</a></li></ul></div></div>
<script>(RLQ=window.RLQ||[]).push(function(){mw.config.set({"wgPageParseReport":{"limitreport":{"cputime":"0.008","walltime":"0.009","ppvisitednodes":{"value":9,"limit":1000000},"ppgeneratednodes":{"value":0,"limit":1000000},"postexpandincludesize":{"value":106,"limit":2097152},"templateargumentsize":{"value":0,"limit":2097152},"expansiondepth":{"value":2,"limit":40},"expensivefunctioncount":{"value":0,"limit":100},"unstrip-depth":{"value":0,"limit":20},"unstrip-size":{"value":0,"limit":5000000},"timingprofile":["100.00%    0.782      1 Template:GSC","100.00%    0.782      1 -total"]},"cachereport":{"timestamp":"20201016193917","ttl":86400,"transientcontent":false}}});mw.config.set({"wgBackendResponseTime":58});});</script><div>This is a full mirror from glitchcity.wiki dated 16/10/2020, for preservation purposes. All rights belong to the original copyright owners. This is a mirror of content freely available on the public domain.</div></body>
<!-- Mirrored from glitchcity.wiki/Special_Defense_badge_boost_glitch by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 16 Oct 2020 21:21:06 GMT -->
</html>