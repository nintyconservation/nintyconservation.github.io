
<!DOCTYPE html>
<html class="client-nojs" lang="en" dir="ltr">

<!-- Mirrored from glitchcity.wiki/index.php?title=NPC_walking_behavior_glitches&action=edit by HTTrack Website Copier/3.x [XR&CO'2014], Sat, 17 Oct 2020 09:29:54 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /Added by HTTrack -->
<head>
<meta charset="UTF-8" />
<title>View source for NPC walking behavior glitches - Glitch City Wiki</title>
<script src="cdn-cgi/apps/head/TVJhTom-oMvagx6X31REykU34Zo.js"></script><script>document.documentElement.className="client-js";RLCONF={"wgCanonicalNamespace":"","wgCanonicalSpecialPageName":!1,"wgNamespaceNumber":0,"wgPageName":"NPC_walking_behavior_glitches","wgTitle":"NPC walking behavior glitches","wgCurRevisionId":9270,"wgRevisionId":0,"wgArticleId":9269,"wgIsArticle":!1,"wgIsRedirect":!1,"wgAction":"edit","wgUserName":null,"wgUserGroups":["*"],"wgCategories":[],"wgBreakFrames":!0,"wgPageContentLanguage":"en","wgPageContentModel":"wikitext","wgSeparatorTransformTable":["",""],"wgDigitTransformTable":["",""],"wgDefaultDateFormat":"dmy","wgMonthNames":["","January","February","March","April","May","June","July","August","September","October","November","December"],"wgMonthNamesShort":["","Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],"wgRelevantPageName":"NPC_walking_behavior_glitches","wgRelevantArticleId":9269,"wgRequestId":"4cb2a5afa0376fad6385992b","wgCSPNonce":!1,"wgIsProbablyEditable":!1,
"wgRelevantPageIsProbablyEditable":!1,"wgRestrictionEdit":[],"wgRestrictionMove":[]};RLSTATE={"site.styles":"ready","noscript":"ready","user.styles":"ready","user":"ready","user.options":"ready","user.tokens":"loading","mediawiki.legacy.shared":"ready","mediawiki.legacy.commonPrint":"ready","mediawiki.skinning.interface":"ready","mediawiki.skinning.content.externallinks":"ready","skins.monobook.responsive":"ready"};RLPAGEMODULES=["mediawiki.action.edit.collapsibleFooter","site","mediawiki.page.startup","mediawiki.page.ready","mediawiki.searchSuggest","skins.monobook.mobile"];</script>
<script>(RLQ=window.RLQ||[]).push(function(){mw.loader.implement("user.tokens@tffin",function($,jQuery,require,module){/*@nomin*/mw.user.tokens.set({"editToken":"+\\","patrolToken":"+\\","watchToken":"+\\","csrfToken":"+\\"});
});});</script>
<link rel="stylesheet" href="load555a.css?lang=en&amp;modules=mediawiki.legacy.commonPrint%2Cshared%7Cmediawiki.skinning.content.externallinks%7Cmediawiki.skinning.interface%7Cskins.monobook.responsive&amp;only=styles&amp;skin=monobook" />
<script async="" src="load2418.php?lang=en&amp;modules=startup&amp;only=scripts&amp;raw=1&amp;skin=monobook"></script>
<!--[if lt IE 9]><link rel="stylesheet" href="/skins/MonoBook/resources/screen-desktop.css?74a6a" media="screen"/><![endif]--><!--[if IE 6]><link rel="stylesheet" href="/skins/MonoBook/resources/IE60Fixes.css?1208f" media="screen"/><![endif]--><!--[if IE 7]><link rel="stylesheet" href="/skins/MonoBook/resources/IE70Fixes.css?4e4d4" media="screen"/><![endif]-->
<meta name="ResourceLoaderDynamicStyles" content="" />
<link rel="stylesheet" href="loaddca0.css?lang=en&amp;modules=site.styles&amp;only=styles&amp;skin=monobook" />
<meta name="generator" content="MediaWiki 1.34.2" />
<meta name="robots" content="noindex,nofollow" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes, minimum-scale=0.25, maximum-scale=5.0" />
<link rel="shortcut icon" href="https://glitchcity.wiki/favicon.ico" />
<link rel="search" type="application/opensearchdescription+xml" href="https://glitchcity.wiki/opensearch_desc.php" title="Glitch City Wiki (en)" />
<link rel="EditURI" type="application/rsd+xml" href="https://glitchcity.wiki/api.php?action=rsd" />
<link rel="alternate" type="application/atom+xml" title="Glitch City Wiki Atom feed" href="https://glitchcity.wiki/index.php?title=Special:RecentChanges&amp;feed=atom" />
<!--[if lt IE 9]><script src="/resources/lib/html5shiv/html5shiv.js"></script><![endif]-->
</head>
<body class="mediawiki ltr sitedir-ltr mw-hide-empty-elt ns-0 ns-subject page-NPC_walking_behavior_glitches rootpage-NPC_walking_behavior_glitches skin-monobook action-edit"><div id="globalWrapper"><div id="column-content"><div id="content" class="mw-body" role="main"><a id="top"></a><div class="mw-indicators mw-body-content">
</div>
<h1 id="firstHeading" class="firstHeading" lang="en">View source for NPC walking behavior glitches</h1><div id="bodyContent" class="mw-body-content"><div id="siteSub">From Glitch City Wiki</div><div id="contentSub" lang="en" dir="ltr">← <a href="https://glitchcity.wiki/NPC_walking_behavior_glitches" title="NPC walking behavior glitches">NPC walking behavior glitches</a></div><div id="jump-to-nav"></div><a href="#column-one" class="mw-jump-link">Jump to navigation</a><a href="#searchInput" class="mw-jump-link">Jump to search</a><div id="mw-content-text"><p>You do not have permission to edit this page, for the following reason:
</p>
<div class="permissions-errors">
<p>The action you have requested is limited to users in the group: <a href="https://glitchcity.wiki/index.php?title=Glitch_City_Wiki:Users&amp;action=edit&amp;redlink=1" class="new" title="Glitch City Wiki:Users (page does not exist)">Users</a>.
</p>
</div><hr />
<p>You can view and copy the source of this page.
</p><textarea readonly="" accesskey="," id="wpTextbox1" cols="80" rows="25" style="" class="mw-editfont-monospace" lang="en" dir="ltr" name="wpTextbox1">'''NPC walking behavior glitches''' are [[glitch]]es in {{RB}} that affect the behavior of NPCs that walk on their own (as opposed to during scripts) in the overworld.

==Glitches related to NPC displacement==
The game keeps track of the displacement of each NPC from its original position. Presumably, the intention is to keep an NPC from moving too far from its home location, but the actual execution ([https://github.com/pret/pokered/blob/725b86ebbec23bd1f53fd60bf0201c904fee951d/engine/overworld/movement.asm#L635 external link]) makes little sense:
* If the NPC is trying to move upwards, and it is already 8 steps above its initial position, then don't move.
* If the NPC is '''not''' trying to move upwards, and it would be 4 or more steps above its initial position after finishing this step, then don't move.
* If the NPC is trying to move left, and it is already 8 steps left of its initial position, then don't move.
* If the NPC is '''not''' trying to move left, and it would be 4 or more steps left of its initial position after finishing this step, then '''do nothing (allow the move)'''.

While the first and third clauses make sense, the second clause doesn't really make sense, and the last clause does literally nothing.

The consequences of the first two clauses are:
* When an NPC is exactly 4 steps above its initial position, it '''cannot move horizontally''', but it can move up or down (the latter bringing vertical displacement back to 3).
* When an NPC is 5~7 steps above its initial position, it '''can only move up''', not in any other direction.
* When an NPC is 8 steps above its initial position, it '''cannot move at all'''.

To summarize the last two points, once an NPC moves 5 steps above its initial position, it can do nothing but move three more steps up (or less, if there is an impassable obstacle in its way), and then it gets completely stuck (until the player leaves the map to reset NPC positions).

This glitch can be easily observed because when an NPC fails to move, it will still turn to the direction it tries to move, just as if it tried to walk against an obstacle (the border of the screen counts as an obstacle). Notice that for walking NPCs, turning without moving doesn't happen in usual cases.

Notable consequences of this glitch include:
* When trying to do the [[get stuck in a wall]] glitch, the girl must be guided to the desired horizontal position before allowed to move up the final three steps (the desired position is 7 steps above her initial position). Furthermore, if she moves one more step up, the player has to reset NPC positions and try again.
* If the walking NPC in Cerulean City Pokémon Center [[NPC collision bypassing glitches|walks through the Cable Club lady]], he would be stuck in the tile behind her without going left or right, because that tile is exactly 4 steps above his initial position (and he cannot go up or down either).

In Japanese {{RGB}}, the last clause works just like the second clause, meaning that an NPC can get stuck by moving too far to the left as well as by moving too far upwards. The "left" version of this glitch is more dangerous, because there are five places (three Pokémon Centers and two Poké Marts) where a player can be trapped in a 1-tile wide aisle against an NPC that could only move left, resulting in a soft-lock. Perhaps this is the reason the English versions fixed the "left" part of this glitch, but kept the "up" part unchanged.

In {{Y}}, this glitch has been fixed by making both the second clause and the last clause do nothing. Plus, (presumably as a failsafe) impassable obstacles are placed in the aisles that used to be possible to be trapped in.

==Glitch related to the border of the screen==
As mentioned above, the border of the screen is considered as an obstacle to walking NPCs. The way the game checks for this is by checking whether the coordinate of the NPC '''after walking a pixel''' would be on-screen (0x00 &lt;= Y coordinate &lt;= 0x80, 0x00 &lt;= X coordinate &lt;= 0x90). However, due to an off-by-one error, Y = 0x80 (the bottom row) and X = 0x90 (the rightmost column) are both considered off-screen in this check.

The consequence of this is the NPC cannot move along those two borders (i.e. move left or right on the bottom row, or move up or down on the rightmost column). Moving down onto the bottom row or right onto the rightmost column are still allowed, because after walking only one pixel, the relevant coordinates, Y = 0x71 or X = 0x81, are still considered on-screen. Moving up from the bottom row or left from the rightmost column are also allowed, because the relevant coordinates will then be Y = 0x7F or X = 0x8F.

This glitch still exists in {{Y}}.

==Movement delay oversight==
Every NPC has a "movement delay", which is set to a random value between 0 and 127 whenever they finish walking a step, or fail to do so (e.g. because they would walk into an obstacle, or they don't walk at all). When an on-screen NPC is in the "waiting" state, the movement delay decreases every "overworld frame" (two frames), and when it decreases to 0, the NPC goes into the "ready" state, and will try to walk during the next overworld frame.

The intention is probably to make NPCs walk with a random interval of up to ~4.3 seconds. However, the keyword is "decreases to 0": If the movement delay is randomly set to 0, then the NPC will still enter the "waiting" state, and decrease the movement delay, causing it to underflow to 255. Therefore a movement delay of 0 essentially behaves like 256, giving the NPC a small chance (1/128) to wait ~8.6 seconds before the next movement.

{{clr}}
==Youtube Video==
{{Youtube|9E1nAHmd380|Crystal_}}
==External links==
*[http://hakuda2.web.fc2.com/wario/poke1/k19.html Page on Legendary Star Blob documenting the displacement-related glitch, including some places where the player may get stuck].
[[Category:Generation I glitches]]
</textarea><div class="templatesUsed"><div class="mw-templatesUsedExplanation"><p>Templates used on this page:
</p></div><ul>
<li><a href="https://glitchcity.wiki/Template:Clr" title="Template:Clr">Template:Clr</a> (<a href="https://glitchcity.wiki/index.php?title=Template:Clr&amp;action=edit" title="Template:Clr">view source</a>) </li><li><a href="https://glitchcity.wiki/Template:RB" title="Template:RB">Template:RB</a> (<a href="https://glitchcity.wiki/index.php?title=Template:RB&amp;action=edit" title="Template:RB">view source</a>) </li><li><a href="https://glitchcity.wiki/Template:RGB" title="Template:RGB">Template:RGB</a> (<a href="https://glitchcity.wiki/index.php?title=Template:RGB&amp;action=edit" title="Template:RGB">view source</a>) </li><li><a href="https://glitchcity.wiki/Template:Y" class="mw-redirect" title="Template:Y">Template:Y</a> (<a href="https://glitchcity.wiki/index.php?title=Template:Y&amp;action=edit" class="mw-redirect" title="Template:Y">view source</a>) </li><li><a href="https://glitchcity.wiki/Template:Yellow" title="Template:Yellow">Template:Yellow</a> (<a href="https://glitchcity.wiki/index.php?title=Template:Yellow&amp;action=edit" title="Template:Yellow">view source</a>) </li><li><a href="https://glitchcity.wiki/Template:YouTube" title="Template:YouTube">Template:YouTube</a> (<a href="https://glitchcity.wiki/index.php?title=Template:YouTube&amp;action=edit" title="Template:YouTube">view source</a>) </li><li><a href="https://glitchcity.wiki/Template:Youtube" class="mw-redirect" title="Template:Youtube">Template:Youtube</a> (<a href="https://glitchcity.wiki/index.php?title=Template:Youtube&amp;action=edit" class="mw-redirect" title="Template:Youtube">view source</a>) </li></ul></div><p id="mw-returnto">Return to <a href="https://glitchcity.wiki/NPC_walking_behavior_glitches" title="NPC walking behavior glitches">NPC walking behavior glitches</a>.</p>
</div><div class="printfooter">
Retrieved from "<a dir="ltr" href="https://glitchcity.wiki/NPC_walking_behavior_glitches">https://glitchcity.wiki/NPC_walking_behavior_glitches</a>"</div>
<div id="catlinks" class="catlinks catlinks-allhidden" data-mw="interface"></div><div class="visualClear"></div></div></div><div class="visualClear"></div></div><div id="column-one" lang="en" dir="ltr"><h2>Navigation menu</h2><div role="navigation" class="portlet" id="p-cactions" aria-labelledby="p-cactions-label"><h3 id="p-cactions-label" lang="en" dir="ltr">Page actions</h3><div class="pBody"><ul lang="en" dir="ltr"><li id="ca-nstab-main" class="selected"><a href="https://glitchcity.wiki/NPC_walking_behavior_glitches" title="View the content page [c]" accesskey="c">Page</a></li><li id="ca-talk" class="new"><a href="https://glitchcity.wiki/index.php?title=Talk:NPC_walking_behavior_glitches&amp;action=edit&amp;redlink=1" rel="discussion" title="Discussion about the content page (page does not exist) [t]" accesskey="t">Discussion</a></li><li id="ca-viewsource" class="selected"><a href="https://glitchcity.wiki/index.php?title=NPC_walking_behavior_glitches&amp;action=edit" title="This page is protected.&#10;You can view its source [e]" accesskey="e">View source</a></li><li id="ca-history"><a href="https://glitchcity.wiki/index.php?title=NPC_walking_behavior_glitches&amp;action=history" title="Past revisions of this page [h]" accesskey="h">History</a></li></ul></div></div><div role="navigation" class="portlet" id="p-cactions-mobile" aria-labelledby="p-cactions-mobile-label"><h3 id="p-cactions-mobile-label" lang="en" dir="ltr">Page actions</h3><div class="pBody"><ul lang="en" dir="ltr"><li id="ca-nstab-main-mobile" class="selected"><a href="https://glitchcity.wiki/NPC_walking_behavior_glitches" title="Page">Page</a></li><li id="ca-talk-mobile" class="new"><a href="https://glitchcity.wiki/index.php?title=Talk:NPC_walking_behavior_glitches&amp;action=edit&amp;redlink=1" rel="discussion" title=" (page does not exist)">Discussion</a></li><li id="ca-more"><a href="#p-cactions">More</a></li><li id="ca-tools"><a href="#p-tb" title="Tools">Tools</a></li></ul></div></div><div role="navigation" class="portlet" id="p-personal" aria-labelledby="p-personal-label"><h3 id="p-personal-label" lang="en" dir="ltr">Personal tools</h3><div class="pBody"><ul lang="en" dir="ltr"><li id="pt-createaccount"><a href="https://glitchcity.wiki/index.php?title=Special:CreateAccount&amp;returnto=NPC+walking+behavior+glitches&amp;returntoquery=action%3Dedit" title="You are encouraged to create an account and log in; however, it is not mandatory">Create account</a></li><li id="pt-login"><a href="https://glitchcity.wiki/index.php?title=Special:UserLogin&amp;returnto=NPC+walking+behavior+glitches&amp;returntoquery=action%3Dedit" title="You are encouraged to log in; however, it is not mandatory [o]" accesskey="o">Log in</a></li></ul></div></div><div class="portlet" id="p-logo" role="banner"><a href="https://glitchcity.wiki/Main_Page" class="mw-wiki-logo" title="Visit the main page"></a></div><div id="sidebar"><div role="navigation" class="portlet generated-sidebar" id="p-Main_Menu" aria-labelledby="p-Main_Menu-label"><h3 id="p-Main_Menu-label" lang="en" dir="ltr">Main Menu</h3><div class="pBody"><ul lang="en" dir="ltr"><li id="n-Main-page"><a href="https://glitchcity.wiki/Main_Page">Main page</a></li><li id="n-New-pages"><a href="https://glitchcity.wiki/Special:NewPages">New pages</a></li><li id="n-Recent-changes"><a href="https://glitchcity.wiki/Special:RecentChanges">Recent changes</a></li><li id="n-Random-page"><a href="https://glitchcity.wiki/Special:Random">Random page</a></li><li id="n-Help"><a href="https://www.mediawiki.org/wiki/Special:MyLanguage/Help:Contents">Help</a></li></ul></div></div><div role="navigation" class="portlet generated-sidebar" id="p-Glitches" aria-labelledby="p-Glitches-label"><h3 id="p-Glitches-label" lang="en" dir="ltr">Glitches</h3><div class="pBody"><ul lang="en" dir="ltr"><li id="n-Arbitrary-code-execution"><a href="https://glitchcity.wiki/Arbitrary_code_execution">Arbitrary code execution</a></li><li id="n-Pok.C3.A9mon-cloning"><a href="https://glitchcity.wiki/Pokémon_cloning">Pokémon cloning</a></li><li id="n-Pomeg-glitch-and-Glitzer-Popping"><a href="https://glitchcity.wiki/Pomeg_data_corruption_glitch">Pomeg glitch and Glitzer Popping</a></li><li id="n-Tweaking-and-voiding"><a href="https://glitchcity.wiki/Tweaking">Tweaking and voiding</a></li><li id="n-Glitches-by-generation"><a href="https://glitchcity.wiki/Category:Generational_Glitches">Glitches by generation</a></li><li id="n-Other-glitch-categories"><a href="https://glitchcity.wiki/Category:Glitches_by_category">Other glitch categories</a></li></ul></div></div><div role="navigation" class="portlet generated-sidebar" id="p-References.2FResources" aria-labelledby="p-References.2FResources-label"><h3 id="p-References.2FResources-label" lang="en" dir="ltr">References/Resources</h3><div class="pBody"><ul lang="en" dir="ltr"><li id="n-Databases"><a href="https://glitchcity.wiki/Glitch_City_Laboratories:Databases">Databases</a></li><li id="n-Disassembly-projects"><a href="https://glitchcity.wiki/List_of_Pokémon_disassembly_projects">Disassembly projects</a></li><li id="n-The-Big-HEX-List"><a href="https://glitchcity.wiki/The_Big_HEX_List">The Big HEX List</a></li><li id="n-Interactive-tools"><a href="https://glitchcity.wiki/Category:Interactive_tools">Interactive tools</a></li><li id="n-Reference-documents"><a href="https://glitchcity.wiki/Category:Reference_documents">Reference documents</a></li><li id="n-Terminology"><a href="https://glitchcity.wiki/Category:Terminology">Terminology</a></li></ul></div></div><div role="navigation" class="portlet generated-sidebar" id="p-Speedrun_Routes_any.25" aria-labelledby="p-Speedrun_Routes_any.25-label"><h3 id="p-Speedrun_Routes_any.25-label" lang="en" dir="ltr">Speedrun Routes any%</h3><div class="pBody"><ul lang="en" dir="ltr"><li id="n-Pok.C3.A9mon-Crystal"><a href="https://glitchcity.wiki/Pokémon_Crystal_any%25_speedrun_route">Pokémon Crystal</a></li><li id="n-Pok.C3.A9mon-Blue"><a href="https://glitchcity.wiki/Pokémon_Blue_any%25_No_Save_Corruption_speedrun_route">Pokémon Blue</a></li></ul></div></div><div role="navigation" class="portlet generated-sidebar" id="p-External_Links" aria-labelledby="p-External_Links-label"><h3 id="p-External_Links-label" lang="en" dir="ltr">External Links</h3><div class="pBody"><ul lang="en" dir="ltr"><li id="n-GCRI-Discord"><a href="https://discord.gg/EA7jxJ6" rel="nofollow">GCRI Discord</a></li></ul></div></div><div role="navigation" class="portlet" id="p-tb" aria-labelledby="p-tb-label"><h3 id="p-tb-label" lang="en" dir="ltr">Tools</h3><div class="pBody"><ul lang="en" dir="ltr"><li id="t-whatlinkshere"><a href="https://glitchcity.wiki/Special:WhatLinksHere/NPC_walking_behavior_glitches" title="A list of all wiki pages that link here [j]" accesskey="j">What links here</a></li><li id="t-recentchangeslinked"><a href="https://glitchcity.wiki/Special:RecentChangesLinked/NPC_walking_behavior_glitches" rel="nofollow" title="Recent changes in pages linked from this page [k]" accesskey="k">Related changes</a></li><li id="t-specialpages"><a href="https://glitchcity.wiki/Special:SpecialPages" title="A list of all special pages [q]" accesskey="q">Special pages</a></li><li id="t-info"><a href="https://glitchcity.wiki/index.php?title=NPC_walking_behavior_glitches&amp;action=info" title="More information about this page">Page information</a></li></ul></div></div><div role="search" class="portlet" id="p-search"><h3 id="p-search-label" lang="en" dir="ltr"><label for="searchInput">Search</label></h3><div class="pBody" id="searchBody"><form action="https://glitchcity.wiki/index.php" id="searchform"><input type="hidden" value="Special:Search" name="title" /><input type="search" name="search" placeholder="Search Glitch City Wiki" title="Search Glitch City Wiki [f]" accesskey="f" id="searchInput" /><input type="submit" name="go" value="Go" title="Go to a page with this exact name if it exists" id="searchGoButton" class="searchButton" />  <input type="submit" name="fulltext" value="Search" title="Search the pages for this text" id="mw-searchButton" class="searchButton" /></form></div></div></div><a href="#sidebar" title="navigation" class="menu-toggle" id="sidebar-toggle"></a><a href="#p-personal" title="user tools" class="menu-toggle" id="p-personal-toggle"></a><a href="#globalWrapper" title="back to top" class="menu-toggle" id="globalWrapper-toggle"></a></div><div class="visualClear"></div><div id="footer" role="contentinfo" lang="en" dir="ltr"><div id="f-poweredbyico" class="footer-icons"><a href="https://www.mediawiki.org/"><img src="https://glitchcity.wiki/resources/assets/poweredby_mediawiki_88x31.png" alt="Powered by MediaWiki" srcset="/resources/assets/poweredby_mediawiki_132x47.png 1.5x, /resources/assets/poweredby_mediawiki_176x62.png 2x" width="88" height="31" /></a></div><ul id="f-list"><li id="privacy"><a href="https://glitchcity.wiki/Glitch_City_Wiki:Privacy_policy" title="Glitch City Wiki:Privacy policy">Privacy policy</a></li><li id="about"><a href="https://glitchcity.wiki/Glitch_City_Wiki:About" class="mw-redirect" title="Glitch City Wiki:About">About Glitch City Wiki</a></li><li id="disclaimer"><a href="https://glitchcity.wiki/Glitch_City_Wiki:General_disclaimer" title="Glitch City Wiki:General disclaimer">Disclaimers</a></li></ul></div></div>
<script>(RLQ=window.RLQ||[]).push(function(){mw.config.set({"wgBackendResponseTime":55});});</script><div>This is a full mirror from glitchcity.wiki dated 16/10/2020, for preservation purposes. All rights belong to the original copyright owners. This is a mirror of content freely available on the public domain.</div></body>
<!-- Mirrored from glitchcity.wiki/index.php?title=NPC_walking_behavior_glitches&action=edit by HTTrack Website Copier/3.x [XR&CO'2014], Sat, 17 Oct 2020 09:29:54 GMT -->
</html>